<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Privacy Policy Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        #policyResult h1, #policyResult h2 { color: #2c3e50; }
        #policyResult p, #policyResult ul { margin-bottom: 1rem; }
        #policyResult ul { list-style: disc; margin-left: 2rem; }
        #policyResult a { color: #2563eb; text-decoration: underline; }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto bg-white rounded-lg shadow-md overflow-hidden">
            <!-- Header -->
            <div class="bg-blue-600 text-white px-6 py-4">
                <h1 class="text-2xl font-bold">Privacy Policy Generator</h1>
                <p class="text-blue-100">Create a custom privacy policy for your website</p>
            </div>

            <!-- Form Section -->
            <div class="p-6 border-b">
                <h2 class="text-xl font-semibold mb-4 text-gray-800">Enter Your Details</h2>
                <form id="policyForm" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Basic Information -->
                    <div class="space-y-4">
                        <div>
                            <label for="websiteName" class="block text-sm font-medium text-gray-700 mb-1">Website Name</label>
                            <input type="text" id="websiteName" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required aria-required="true">
                        </div>
                        <div>
                            <label for="websiteUrl" class="block text-sm font-medium text-gray-700 mb-1">Website URL</label>
                            <input type="url" id="websiteUrl" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required aria-required="true">
                        </div>
                        <div>
                            <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
                            <input type="email" id="email" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required aria-required="true">
                        </div>
                    </div>

                    <div class="space-y-4">
                        <div>
                            <label for="country" class="block text-sm font-medium text-gray-700 mb-1">Country</label>
                            <select id="country" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required aria-required="true">
                                <option value="">Select Country</option>
                                <option value="United States">United States</option>
                                <option value="United Kingdom">United Kingdom</option>
                                <option value="Canada">Canada</option>
                                <option value="Australia">Australia</option>
                                <option value="India">India</option>
                                <option value="Germany">Germany</option>
                                <option value="France">France</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div>
                            <label for="date" class="block text-sm font-medium text-gray-700 mb-1">Effective Date</label>
                            <input type="date" id="date" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required aria-required="true">
                        </div>
                        <div>
                            <label for="ownerType" class="block text-sm font-medium text-gray-700 mb-1">Owner Type</label>
                            <select id="ownerType" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required aria-required="true">
                                <option value="">Select Owner Type</option>
                                <option value="Individual">Individual</option>
                                <option value="Business">Business</option>
                                <option value="Organization">Organization</option>
                            </select>
                        </div>
                        <div id="ownerNameContainer" class="hidden">
                            <label for="ownerName" class="block text-sm font-medium text-gray-700 mb-1">Owner Name</label>
                            <input type="text" id="ownerName" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" aria-required="true">
                        </div>
                    </div>

                    <!-- Data Collection Section -->
                    <div class="md:col-span-2">
                        <h3 class="text-lg font-medium text-gray-800 mb-3">What kind of personal information do you collect from users?</h3>
                        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
                            <div class="flex items-center">
                                <input type="checkbox" id="collectEmail" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                <label for="collectEmail" class="ml-2 block text-sm text-gray-700">Email address</label>
                            </div>
                            <div class="flex items-center">
                                <input type="checkbox" id="collectName" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                <label for="collectName" class="ml-2 block text-sm text-gray-700">First name and last name</label>
                            </div>
                            <div class="flex items-center">
                                <input type="checkbox" id="collectPhone" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                <label for="collectPhone" class="ml-2 block text-sm text-gray-700">Phone number</label>
                            </div>
                            <div class="flex items-center">
                                <input type="checkbox" id="collectAddress" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                <label for="collectAddress" class="ml-2 block text-sm text-gray-700">Address information</label>
                            </div>
                            <div class="flex items-center">
                                <input type="checkbox" id="collectSocial" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                <label for="collectSocial" class="ml-2 block text-sm text-gray-700">Social Media Profile</label>
                            </div>
                            <div class="flex items-center">
                                <input type="checkbox" id="collectOther" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                <label for="collectOther" class="ml-2 block text-sm text-gray-700">Other information</label>
                            </div>
                        </div>
                        <div id="otherInfoContainer" class="mt-3 hidden">
                            <label for="otherInfo" class="block text-sm font-medium text-gray-700 mb-1">Please specify other information collected</label>
                            <input type="text" id="otherInfo" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                    </div>

                    <!-- Contact Methods -->
                    <div class="md:col-span-2">
                        <h3 class="text-lg font-medium text-gray-800 mb-3">How can users contact you regarding your Privacy Policy?</h3>
                        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4">
                            <div class="flex items-center">
                                <input type="checkbox" id="contactEmail" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                <label for="contactEmail" class="ml-2 block text-sm text-gray-700">By email</label>
                            </div>
                            <div class="flex items-center">
                                <input type="checkbox" id="contactPage" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                <label for="contactPage" class="ml-2 block text-sm text-gray-700">By visiting a page</label>
                            </div>
                            <div class="flex items-center">
                                <input type="checkbox" id="contactPhone" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                <label for="contactPhone" class="ml-2 block text-sm text-gray-700">By phone number</label>
                            </div>
                            <div id="phoneContainer" class="hidden col-span-full">
                                <label for="phoneNumber" class="block text-sm font-medium text-gray-700 mb-1">Phone Number</label>
                                <input type="tel" id="phoneNumber" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div class="flex items-center">
                                <input type="checkbox" id="contactMail" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                <label for="contactMail" class="ml-2 block text-sm text-gray-700">By sending mail</label>
                            </div>
                            <div id="mailContainer" class="hidden col-span-full">
                                <label for="mailAddress" class="block text-sm font-medium text-gray-700 mb-1">Mailing Address</label>
                                <textarea id="mailAddress" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" rows="3"></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Additional Options -->
                    <div class="md:col-span-2">
                        <h3 class="text-lg font-medium text-gray-800 mb-3">Additional Options</h3>
                        <div class="space-y-3">
                            <div class="flex items-center">
                                <input type="checkbox" id="useCookies" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                <label for="useCookies" class="ml-2 block text-sm text-gray-700">Do you use cookies?</label>
                            </div>
                            <div class="flex items-center">
                                <input type="checkbox" id="hasThirdParty" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                <label for="hasThirdParty" class="ml-2 block text-sm text-gray-700">Do you share data with third parties?</label>
                            </div>
                            <div class="flex items-center">
                                <input type="checkbox" id="hasChildren" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                <label for="hasChildren" class="ml-2 block text-sm text-gray-700">Does your website collect information from children?</label>
                            </div>
                        </div>
                    </div>

                    <!-- Generate Button -->
                    <div class="md:col-span-2 pt-4">
                        <button type="button" id="generateBtn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-md transition duration-200 disabled:bg-blue-400" aria-label="Generate Privacy Policy">
                            <span id="generateText">Generate Privacy Policy</span>
                            <span id="loadingText" class="hidden">Generating...</span>
                        </button>
                    </div>
                </form>
            </div>

            <!-- Result Section -->
            <div id="resultSection" class="p-6 hidden">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-semibold text-gray-800">Your Privacy Policy</h2>
                    <button id="copyBtn" class="flex items-center text-sm bg-gray-200 hover:bg-gray-300 px-3 py-1 rounded" aria-label="Copy Privacy Policy to Clipboard">
                        <i class="far fa-copy mr-1"></i> <span>Copy to Clipboard</span>
                    </button>
                </div>
                <div id="policyResult" class="bg-gray-50 p-4 rounded-md border border-gray-200 overflow-auto max-h-96"></div>
                <div class="mt-4 flex justify-end">
                    <button id="downloadBtn" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-md transition duration-200 flex items-center" aria-label="Download Privacy Policy as HTML">
                        <i class="fas fa-download mr-2"></i> Download as HTML
                    </button>
                </div>
            </div>
        </div>

        <footer class="mt-8 text-center text-gray-500 text-sm">
            <p>This privacy policy generator provides general information and should not be considered legal advice.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Utility functions
            const sanitizeHTML = (str) => {
                const div = document.createElement('div');
                div.textContent = str;
                return div.innerHTML;
            };

            const validateURL = (url) => {
                try {
                    new URL(url);
                    return true;
                } catch {
                    return false;
                }
            };

            const validateEmail = (email) => {
                return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
            };

            const formatList = (items) => {
                if (items.length === 1) return items[0];
                if (items.length === 2) return items.join(' and ');
                return items.slice(0, -1).join(', ') + ', and ' + items[items.length - 1];
            };

            // Set default date to today
            document.getElementById('date').value = new Date().toISOString().split('T')[0];

            // Handle owner type change
            const ownerType = document.getElementById('ownerType');
            const ownerNameContainer = document.getElementById('ownerNameContainer');
            const ownerName = document.getElementById('ownerName');
            ownerType.addEventListener('change', () => {
                if (ownerType.value === 'Individual') {
                    ownerNameContainer.classList.remove('hidden');
                    ownerName.required = true;
                } else {
                    ownerNameContainer.classList.add('hidden');
                    ownerName.required = false;
                    ownerName.value = '';
                }
            });

            // Handle other info checkbox
            const collectOther = document.getElementById('collectOther');
            const otherInfoContainer = document.getElementById('otherInfoContainer');
            const otherInfo = document.getElementById('otherInfo');
            collectOther.addEventListener('change', () => {
                otherInfoContainer.classList.toggle('hidden', !collectOther.checked);
                otherInfo.required = collectOther.checked;
                if (!collectOther.checked) otherInfo.value = '';
            });

            // Handle contact methods
            const contactPhone = document.getElementById('contactPhone');
            const phoneContainer = document.getElementById('phoneContainer');
            const phoneNumber = document.getElementById('phoneNumber');
            contactPhone.addEventListener('change', () => {
                phoneContainer.classList.toggle('hidden', !contactPhone.checked);
                phoneNumber.required = contactPhone.checked;
                if (!contactPhone.checked) phoneNumber.value = '';
            });

            const contactMail = document.getElementById('contactMail');
            const mailContainer = document.getElementById('mailContainer');
            const mailAddress = document.getElementById('mailAddress');
            contactMail.addEventListener('change', () => {
                mailContainer.classList.toggle('hidden', !contactMail.checked);
                mailAddress.required = contactMail.checked;
                if (!contactMail.checked) mailAddress.value = '';
            });

            // Generate policy
            const generateBtn = document.getElementById('generateBtn');
            const generateText = document.getElementById('generateText');
            const loadingText = document.getElementById('loadingText');

            generateBtn.addEventListener('click', async () => {
                generateBtn.disabled = true;
                generateText.classList.add('hidden');
                loadingText.classList.remove('hidden');

                try {
                    await generatePolicy();
                } catch (error) {
                    alert(error.message);
                } finally {
                    generateBtn.disabled = false;
                    generateText.classList.remove('hidden');
                    loadingText.classList.add('hidden');
                }
            });

            // Copy to clipboard
            const copyBtn = document.getElementById('copyBtn');
            copyBtn.addEventListener('click', async () => {
                const policyText = document.getElementById('policyResult').innerText;
                try {
                    await navigator.clipboard.writeText(policyText);
                    copyBtn.innerHTML = '<i class="fas fa-check mr-1"></i> Copied!';
                    setTimeout(() => {
                        copyBtn.innerHTML = '<i class="far fa-copy mr-1"></i> <span>Copy to Clipboard</span>';
                    }, 2000);
                } catch {
                    alert('Failed to copy to clipboard. Please try again.');
                }
            });

            // Download as HTML
            const downloadBtn = document.getElementById('downloadBtn');
            downloadBtn.addEventListener('click', () => {
                const policyHTML = document.getElementById('policyResult').innerHTML;
                const websiteName = sanitizeHTML(document.getElementById('websiteName').value || 'website');
                const filename = `${websiteName.toLowerCase().replace(/\s+/g, '-')}-privacy-policy.html`;

                const blob = new Blob([`
                    <!DOCTYPE html>
                    <html lang="en">
                    <head>
                        <meta charset="UTF-8">
                        <meta name="viewport" content="width=device-width, initial-scale=1.0">
                        <meta name="description" content="Privacy Policy for ${websiteName}">
                        <title>Privacy Policy - ${websiteName}</title>
                        <style>
                            body { font-family: Arial, sans-serif; line-height: 1.6; max-width: 800px; margin: 0 auto; padding: 20px; }
                            h1, h2 { color: #2c3e50; }
                            h1 { border-bottom: 2px solid #eee; padding-bottom: 10px; }
                            h2 { margin-top: 30px; }
                            p, ul { margin-bottom: 1rem; }
                            ul { list-style: disc; margin-left: 2rem; }
                            a { color: #2563eb; text-decoration: underline; }
                        </style>
                    </head>
                    <body>
                        ${policyHTML}
                    </body>
                    </html>
                `], { type: 'text/html' });

                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = filename;
                link.click();
                URL.revokeObjectURL(link.href);
            });

            async function generatePolicy() {
                // Collect form values
                const websiteName = document.getElementById('websiteName').value.trim();
                const websiteUrl = document.getElementById('websiteUrl').value.trim();
                const email = document.getElementById('email').value.trim();
                const country = document.getElementById('country').value;
                const date = document.getElementById('date').value;
                const ownerType = document.getElementById('ownerType').value;
                const ownerName = document.getElementById('ownerName').value.trim();

                // Validate inputs
                if (!websiteName) throw new Error('Website Name is required.');
                if (!websiteUrl || !validateURL(websiteUrl)) throw new Error('Please enter a valid Website URL (e.g., https://example.com).');
                if (!email || !validateEmail(email)) throw new Error('Please enter a valid Email Address.');
                if (!country) throw new Error('Country is required.');
                if (!date) throw new Error('Effective Date is required.');
                if (!ownerType) throw new Error('Owner Type is required.');
                if (ownerType === 'Individual' && !ownerName) throw new Error('Owner Name is required for Individual owner type.');
                if (document.getElementById('collectOther').checked && !document.getElementById('otherInfo').value.trim()) {
                    throw new Error('Please specify the other information collected.');
                }
                if (contactPhone.checked && !phoneNumber.value.trim()) throw new Error('Phone Number is required when "By phone number" is selected.');
                if (contactMail.checked && !mailAddress.value.trim()) throw new Error('Mailing Address is required when "By sending mail" is selected.');

                // Format date
                const formattedDate = new Date(date).toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });

                // Data collection
                const collects = [];
                if (document.getElementById('collectEmail').checked) collects.push('email address');
                if (document.getElementById('collectName').checked) collects.push('first and last name');
                if (document.getElementById('collectPhone').checked) collects.push('phone number');
                if (document.getElementById('collectAddress').checked) collects.push('address, state, province, ZIP/postal code, city');
                if (document.getElementById('collectSocial').checked) collects.push('social media profile information');
                if (document.getElementById('collectOther').checked) {
                    collects.push(sanitizeHTML(document.getElementById('otherInfo').value.trim().toLowerCase()));
                }

                // Contact methods
                const contactMethods = [];
                if (document.getElementById('contactEmail').checked) {
                    contactMethods.push(`By email: ${sanitizeHTML(email)}`);
                }
                if (document.getElementById('contactPage').checked) {
                    contactMethods.push(`By visiting this page on our website: ${sanitizeHTML(websiteUrl)}/contact`);
                }
                if (contactPhone.checked) {
                    contactMethods.push(`By phone number: ${sanitizeHTML(phoneNumber.value.trim())}`);
                }
                if (contactMail.checked) {
                    contactMethods.push(`By sending post mail to: ${sanitizeHTML(mailAddress.value.trim())}`);
                }

                // Additional options
                const usesCookies = document.getElementById('useCookies').checked;
                const hasThirdParty = document.getElementById('hasThirdParty').checked;
                const hasChildren = document.getElementById('hasChildren').checked;

                // Generate policy sections
                const sections = [
                    {
                        title: `Privacy Policy for ${sanitizeHTML(websiteName)}`,
                        content: `
                            <p><em>Effective Date: ${sanitizeHTML(formattedDate)}</em></p>
                            <p>At ${sanitizeHTML(websiteName)}, accessible from <a href="${sanitizeHTML(websiteUrl)}">${sanitizeHTML(websiteUrl)}</a>, one of our main priorities is the privacy of our visitors. This Privacy Policy document contains types of information that is collected and recorded by ${sanitizeHTML(websiteName)} and how we use it.</p>
                            <p>If you have additional questions or require more information about our Privacy Policy, do not hesitate to contact us.</p>
                        `,
                        headingLevel: 1
                    },
                    {
                        title: 'Information We Collect',
                        content: `
                            <p>The personal information that you are asked to provide, and the reasons why you are asked to provide it, will be made clear to you at the point we ask you to provide your personal information.</p>
                            ${collects.length > 0 ? `
                                <p>If you contact us directly, we may receive additional information about you such as your ${formatList(collects)} and any other information you may choose to provide.</p>
                            ` : `
                                <p>We do not collect personal information directly from our users, except as necessary to provide our services or as indicated in other sections of this policy (e.g., cookies).</p>
                            `}
                        `
                    },
                    ...(usesCookies ? [{
                        title: 'Cookies and Web Beacons',
                        content: `
                            <p>Like any other website, ${sanitizeHTML(websiteName)} uses 'cookies'. These cookies are used to store information including visitors' preferences, and the pages on the website that the visitor accessed or visited. The information is used to optimize the users' experience by customizing our web page content based on visitors' browser type and/or other information.</p>
                        `
                    }] : []),
                    {
                        title: 'How We Use Your Information',
                        content: `
                            <p>We use the information we collect in various ways, including to:</p>
                            <ul>
                                <li>Provide, operate, and maintain our website</li>
                                <li>Improve, personalize, and expand our website</li>
                                ${collects.length > 0 ? '<li>Understand and analyze how you use our website</li>' : ''}
                                ${collects.includes('email address') ? '<li>Communicate with you, either directly or through one of our partners, including for customer service, to provide you with updates and other information relating to the website, and for marketing and promotional purposes</li>' : ''}
                                <li>Find and prevent fraud</li>
                            </ul>
                        `
                    },
                    ...(hasThirdParty ? [{
                        title: 'Third Party Privacy Policies',
                        content: `
                            <p>${sanitizeHTML(websiteName)}'s Privacy Policy does not apply to other advertisers or websites. Thus, we are advising you to consult the respective Privacy Policies of these third-party ad servers for more detailed information. It may include their practices and instructions about how to opt-out of certain options.</p>
                        `
                    }] : []),
                    ...(hasChildren ? [{
                        title: "Children's Information",
                        content: `
                            <p>Another part of our priority is adding protection for children while using the internet. We encourage parents and guardians to observe, participate in, and/or monitor and guide their online activity.</p>
                            <p>${sanitizeHTML(websiteName)} does not knowingly collect any Personal Identifiable Information from children under the age of 13. If you think that your child provided this kind of information on our website, we strongly encourage you to contact us immediately and we will do our best efforts to promptly remove such information from our records.</p>
                        `
                    }] : []),
                    {
                        title: 'Contact Us',
                        content: `
                            <p>If you have any questions or suggestions about our Privacy Policy, do not hesitate to contact us using one of the following methods:</p>
                            <ul>
                                ${contactMethods.length > 0 ? contactMethods.map(method => `<li>${method}</li>`).join('') : '<li>Please use the contact form on our website.</li>'}
                            </ul>
                        `
                    }
                ];

                // Generate policy HTML
                let sectionNumber = 1;
                const policyHTML = sections.map((section, index) => {
                    const tag = section.headingLevel === 1 ? 'h1' : 'h2';
                    const number = section.headingLevel === 1 ? '' : `${sectionNumber++}. `;
                    return `
                        <${tag}>${number}${sanitizeHTML(section.title)}</${tag}>
                        ${section.content}
                    `;
                }).join('');

                // Display result
                document.getElementById('policyResult').innerHTML = policyHTML;
                document.getElementById('resultSection').classList.remove('hidden');
                document.getElementById('resultSection').scrollIntoView({ behavior: 'smooth' });
            }
        });
    </script>
</body>
</html>